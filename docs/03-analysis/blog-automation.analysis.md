# 블로그 자동화 시스템 - 설계 vs 구현 갭 분석 보고서

> **Summary**: n8n 블로그 자동화 워크플로우의 설계 의도 10개 항목 대비 실제 구현 매치율 분석
>
> **Author**: Gap Detector Agent
> **Created**: 2026-02-24
> **Status**: Draft

---

## 분석 개요

- **분석 대상**: 워크위드 블로그 자동화 시스템
- **설계 의도**: 10개 항목 (사용자 제공)
- **구현 파일**:
  - `blog-automation/n8n-blog-workflow.json` (n8n 워크플로우, 497줄)
  - `blog-automation/sample-output.html` (샘플 출력 가이드, 370줄)
- **분석일**: 2026-02-24

---

## 전체 점수

| 카테고리 | 점수 | 상태 |
|----------|:----:|:----:|
| 설계 매치율 | 82% | -- |
| 워크플로우 완성도 | 85% | -- |
| 프롬프트 품질 | 95% | -- |
| SEO 검증 정확도 | 68% | -- |
| **종합** | **82%** | -- |

---

## 설계 의도 10개 항목별 상세 분석

### 1. 매일 3회 자동 발행 (09시, 12시, 15시)

**설계**: 매일 3회 (09:00, 12:00, 15:00)
**구현**: `"expression": "0 9,12,15 * * 1-5"` (n8n-blog-workflow.json 10행)

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 시간대 | 매치 | 09시, 12시, 15시 정확 |
| 빈도 | 불일치 | 설계는 "매일"이지만 구현은 **월~금(1-5)만 실행** |

> **갭**: 설계 의도가 "매일"이면 주말 포함이어야 하나, `1-5`로 평일만 실행됩니다. 의도적 결정이면 설계 문서에 "평일만"으로 명시 필요.

---

### 2. Claude Haiku로 키워드 선정 -> Claude Sonnet으로 본문 생성

**설계**: Haiku -> 키워드, Sonnet -> 본문 (2단계 AI 파이프라인)
**구현**:
- 키워드 선정: `"model": "claude-haiku-4-5-20251001"` (115행)
- 본문 생성: `"model": "claude-sonnet-4-5-20250929"` (156행)

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 모델 분리 | 완전 매치 | 키워드=Haiku, 본문=Sonnet 정확히 분리 |
| 모델 버전 | 매치 | 최신 모델 ID 사용 |
| 파이프라인 | 매치 | 키워드 파싱 후 본문 생성으로 연결 |

> **판정**: 완전 매치. 갭 없음.

---

### 3. SEO 자동 검증 (100점 만점, 70점 이상만 발행)

**설계**: 100점 만점, 70점 이상만 발행
**구현**: SEO 검증 + 포맷팅 노드(170~178행) + SEO 품질 체크 노드(180~216행)

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 점수 체계 | 불일치 | 구현 최대 점수는 **100점이 아닌 85점** (아래 상세) |
| 발행 기준 | 불일치 | 설계는 **70점**이지만 구현은 **seoScore >= 50 AND charCount >= 2800** |

**구현된 SEO 점수 항목 상세 (n8n-blog-workflow.json 170~173행 Code 노드)**:

| 항목 | 배점 | 조건 |
|------|:----:|------|
| 글자수 | 15점 (or 8점) | 3000자 이상 = 15점, 2500~2999 = 8점 |
| 글자수 초과 안 함 | 5점 | 5000자 이하 |
| 첫 200자 키워드 | 20점 | 첫 200자에 키워드 포함 |
| 키워드 출현 횟수 | 15점 (or 8점) | 5~8회 = 15점, 3~4회 = 8점 |
| 소제목(h3) 수 | 10점 | 3개 이상 |
| FAQ 존재 | 15점 | '자주 묻는 질문' 또는 'FAQ' 텍스트 |
| 키워드 볼드 | 10점 | strong 태그 안에 키워드 |
| 표/리스트 존재 | 10점 | table, ul, ol 중 하나 이상 |
| **합계** | **100점** | 모든 항목 만점 시 |

> 점수 합계를 다시 계산하면: 15 + 5 + 20 + 15 + 10 + 15 + 10 + 10 = **100점**이 맞습니다. 다만 글자수와 키워드 횟수에서 부분 점수(8점)를 받으면 최대 86점이므로, 실질적으로 만점이 나오려면 모든 조건을 완벽히 충족해야 합니다.

> **핵심 갭**: 발행 기준이 설계의 **70점**이 아닌 **50점**으로 구현되었습니다 (192행: `"rightValue": 50`). 설계 대비 발행 기준이 현저히 낮아, 품질이 낮은 글도 발행될 수 있습니다.

> sample-output.html 162행에서는 "SEO 70점 미만이면 자동으로 발행 차단"이라고 명시하고 있어, 샘플 가이드 문서와 실제 워크플로우 간에도 불일치가 발생합니다.

---

### 4. 네이버 블로그 API로 자동 발행

**설계**: 네이버 블로그 API 자동 발행
**구현**: `"url": "https://openapi.naver.com/blog/writePost.json"` (221행)

| 항목 | 판정 | 설명 |
|------|:----:|------|
| API 엔드포인트 | 매치 | 네이버 블로그 API 사용 |
| 인증 | 매치 | OAuth2 인증 설정 완료 |
| 에러 처리 | 부분 매치 | `onError: "continueRegularOutput"` 설정되었으나 발행 실패 시 별도 알림/재시도 없음 |

> **갭**: 발행 실패 시 재시도 로직이나 관리자 알림(Slack/이메일 등)이 없습니다. 네이버 API 장애나 토큰 만료 시 글이 유실될 수 있습니다.

---

### 5. Google Sheets에 발행이력 기록

**설계**: 발행이력 기록
**구현**:
- 성공 시: "발행이력 기록" 노드 (264~302행) - 11개 필드 기록
- 실패 시: "SEO 미달 기록" 노드 (304~341행) - 8개 필드 기록

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 성공 기록 | 매치 | 날짜, 시간, 키워드, 제목, SEO점수 등 기록 |
| 실패 기록 | 매치 (추가구현) | SEO 미달 시에도 기록 (설계에 없었으나 좋은 추가) |
| 설정 시트 | 매치 | "설정" 시트에서 설정 읽기 구현 |

> **판정**: 완전 매치 + 추가 구현(SEO 미달 기록). 갭 없음.

---

### 6. 워크위드 단가 직접 노출 금지 (업계 정보 제공형)

**설계**: 워크위드 구체 단가 노출 금지, 업계 정보 제공형 글
**구현 (프롬프트 내)**:
- 키워드 선정 프롬프트에는 단가 관련 언급 없음 (문제 없음)
- 본문 생성 프롬프트 (156행):
  - `"워크위드의 구체적인 단가(금액)는 본문에 절대 넣지 마세요"`
  - `"CTA에서만 '무료 견적 상담' 정도로 자연스럽게 언급"`
  - `"워크위드를 직접 광고하지 않습니다"`
  - `"글 전체에서 워크위드 언급은 CTA 1회만"`

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 단가 노출 금지 | 매치 | 프롬프트에 명확히 금지 |
| 업계 정보 제공형 | 매치 | "업계 레퍼런스 데이터" 섹션에 업계 평균 시세 제공 |
| CTA 제한 | 매치 | CTA 1회만 언급 규칙 명시 |

> **주의**: 프롬프트에 업계 레퍼런스 데이터로 제공된 콜쉐어링 40~80만원, 반전담 120~180만원, 전담 250~350만원 등의 수치가 워크위드의 **실제 단가(50/80/150/300만원)**와 유사합니다. AI가 이 업계 평균 수치를 기반으로 글을 쓰면 간접적으로 단가가 노출되는 효과가 있을 수 있습니다. 의도적 전략인지 확인 필요.

> **판정**: 프롬프트 레벨에서는 매치. 실제 출력물 검증은 별도 필요.

---

### 7. 3,000~4,000자 + 이미지 5장 + FAQ

**설계**: 3,000~4,000자 + 이미지 5장 + FAQ
**구현**:

| 항목 | 판정 | 상세 |
|------|:----:|------|
| 글자수 지시 | 매치 | 프롬프트에 "3,000~4,000자" 명시 |
| 글자수 검증 | 부분 매치 | SEO 검증에서 3000자 이상 체크 하지만 상한 5000자는 설계의 4000자와 다름 |
| 이미지 | 불일치 | 프롬프트에 "이미지 위치 5-6곳 표시"라 했으나 출력 형식 섹션에서는 "4곳"이라 충돌 |
| 이미지 교체 | 매치 | Unsplash 이미지 6개 하드코딩 후 자동 교체 |
| FAQ | 매치 | 프롬프트에 "FAQ (자주 묻는 질문 2-3개)" 명시 + SEO 검증에서 확인 |

> **갭 1**: 프롬프트 본문에서는 "이미지 위치 5-6곳"이라 했는데, 같은 프롬프트 출력 형식 섹션에서 "4곳"이라고 적어 프롬프트 내부 모순이 있습니다.

> **갭 2**: 이미지가 Unsplash 고정 6장을 순환 사용합니다. 글마다 같은 사진이 반복되어 블로그 품질 저하 우려가 있습니다. 이미지 검색 API(Unsplash API, Pexels API 등)를 통한 동적 이미지 선택이 설계 의도에 더 부합합니다.

---

### 8. 2026 네이버 DIA/C-Rank SEO 최적화

**설계**: 2026 네이버 DIA/C-Rank 알고리즘 최적화
**구현 (프롬프트 내)**:

| SEO 항목 | 구현 여부 | 설명 |
|----------|:--------:|------|
| DIA 스니펫 최적화 | 구현됨 | 핵심 답변 -> 상세 설명 -> FAQ 구조 |
| 키워드 배치 전략 | 구현됨 | 첫 2문장, 소제목, 본문 5-7회, 마지막 문단 |
| AI 요약 최적화 | 구현됨 | 소제목 직후 핵심 요약 문장 지시 |
| 체류시간 극대화 | 구현됨 | 분량, 표, 리스트, 이미지 활용 |
| C-Rank (신뢰도) | 부분 구현 | 전문 정보 제공 콘셉트이나 체계적 내부링크 전략은 미흡 |

> **갭**: `recentTitles` 변수로 최근 5개 제목을 전달하지만, 프롬프트에서 이를 활용하는 내부 링크 지시가 없습니다. 데이터 준비 코드(90행)에서 `recentTitles`를 추출하지만 본문 생성 프롬프트에 전달되지 않아 사실상 사용되지 않는 데이터입니다.

---

### 9. 이미지는 한국/동양 분위기

**설계**: 한국/동양 분위기 이미지
**구현**:
- 프롬프트에 `"이미지 검색어에 반드시 korean 또는 asian 포함"` 명시
- 이미지 플레이스홀더 형식: `<!-- IMAGE: 이미지설명 | 검색키워드(영문, korean business 포함) -->`

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 검색어 지시 | 매치 | korean/asian 키워드 포함 지시 |
| 실제 이미지 | 불일치 | Unsplash 고정 ID 6개는 실제로 서양인/서양 오피스 사진 |

> **갭**: 프롬프트에서 korean/asian 검색어를 지시하지만, SEO 검증 코드에서 이미지를 하드코딩된 Unsplash ID로 교체하므로 프롬프트의 이미지 지시가 무의미합니다. 하드코딩된 6장의 이미지(photo-1600880292203, photo-1552664730 등)는 한국/동양 분위기가 아닌 범용 비즈니스 사진입니다.

---

### 10. 빈말 금지 규칙 (모든 문단에 수치/사례 필수)

**설계**: 모든 문단에 수치/사례 필수, 빈말 금지
**구현**:

| 항목 | 판정 | 설명 |
|------|:----:|------|
| 프롬프트 지시 | 매치 | 상세한 빈말 금지 규칙 + 금지 표현 목록 포함 |
| 업계 데이터 제공 | 매치 | 10개 이상의 구체적 업계 수치를 프롬프트에 포함 |
| 자동 검증 | 미구현 | SEO 검증 코드에 "빈말 금지" 자동 체크 로직 없음 |

> **갭**: 프롬프트에서 빈말 금지를 강력히 지시하지만, SEO 검증 단계에서 "모든 문단에 수치가 있는가"를 자동 검증하지 않습니다. AI가 지시를 무시하고 빈말을 포함해도 발행됩니다. 금지 표현('중요합니다', '다양한 방법이' 등)의 자동 탐지 로직을 추가하면 품질 일관성이 올라갑니다.

---

## 추가 발견 사항

### 설계에 없지만 구현된 기능 (추가 구현)

| 항목 | 구현 위치 | 설명 |
|------|----------|------|
| 카테고리 균형 순환 | 데이터 준비 코드 (90행) | 최근 21건의 카테고리 분포를 분석하여 가장 적게 다룬 카테고리 우선 선정 |
| 키워드 중복 방지 | 데이터 준비 코드 (90행) | 최근 200개 기발행 키워드 전달 |
| SEO 미달 별도 기록 | SEO 미달 기록 노드 (304행) | 발행 차단된 글도 이력에 기록 (원인 분석용) |
| 네이버 스타일 래핑 | SEO 검증 코드 (173행) | Noto Sans KR 폰트 + 네이버 블로그 최적화 CSS |
| 5가지 제목 패턴 | 키워드 프롬프트 | 수치형/질문형/비교형/리스트형/문제해결형 |

### 구현되지 않은 보완 사항

| 항목 | 영향도 | 설명 |
|------|:------:|------|
| 발행 실패 알림 | 높음 | 네이버 API 오류 시 Slack/이메일 알림 없음 |
| 재시도 로직 | 높음 | API 실패 시 자동 재시도 없음 |
| 내부 링크 전략 | 중간 | recentTitles 데이터를 수집하지만 프롬프트에서 미활용 |
| 이미지 동적 선택 | 중간 | 고정 6장 순환 -> 매번 같은 이미지 |
| 빈말 자동 검증 | 낮음 | 금지 표현 자동 탐지 미구현 |
| 주말 실행 여부 명시 | 낮음 | 설계 문서에 평일/매일 명확화 필요 |

---

## 갭 요약

### 즉시 수정 필요 (높은 영향도)

| # | 항목 | 설계 | 구현 | 영향 |
|---|------|------|------|------|
| 1 | SEO 발행 기준 | 70점 이상 | **50점 이상** | 품질 낮은 글 발행 위험 |
| 2 | 이미지 | 한국/동양 분위기 | **서양 비즈니스 사진 6장 고정** | 브랜드 일관성 저해 |

### 문서화/확인 필요 (중간 영향도)

| # | 항목 | 설계 | 구현 | 비고 |
|---|------|------|------|------|
| 3 | 실행 빈도 | "매일" | 평일(월~금)만 | 의도적이면 설계 업데이트 |
| 4 | 이미지 수 | 5장 | 프롬프트 내부 모순 (5-6곳 vs 4곳) | 프롬프트 통일 필요 |
| 5 | 글자수 상한 | 4,000자 | 5,000자까지 허용 | SEO 검증 기준 조정 |
| 6 | 내부 링크 | (미명시) | 데이터 수집만, 활용 안 됨 | 프롬프트에 활용 지시 추가 |

---

## 권장 조치

### 1. SEO 발행 기준 수정 (즉시)

`n8n-blog-workflow.json` 192행의 `rightValue`를 50에서 70으로 변경:

```json
// 변경 전
"rightValue": 50

// 변경 후
"rightValue": 70
```

### 2. 이미지 동적 선택 구현 (권장)

Unsplash API 또는 Pexels API 노드를 추가하여 키워드 기반 동적 이미지 검색:

```
키워드 파싱 -> 이미지 검색 API (korean business + 키워드) -> 본문 생성
```

또는 최소한 하드코딩 이미지를 한국/동양 분위기 사진으로 교체.

### 3. 프롬프트 내부 모순 수정

출력 형식 섹션의 `<!-- IMAGE: ... --> (4곳)`을 `(5곳)`으로 통일.

### 4. recentTitles 활용

본문 생성 프롬프트에 아래 지시 추가:

```
[내부 링크]
최근 발행 글: {{ $json.recentTitles }}
본문 중 관련 주제가 나오면 위 제목을 자연스럽게 언급하세요.
```

### 5. 발행 실패 대응

네이버 블로그 발행 노드 다음에 IF 분기를 추가하여 HTTP 상태코드가 200이 아닌 경우 Slack 웹훅 또는 이메일 알림 전송.

---

## 종합 평가

| 평가 항목 | 점수 |
|----------|:----:|
| 설계 매치율 (10개 항목) | **82%** |
| 워크플로우 완성도 | **85%** |
| 프롬프트 품질 | **95%** |
| SEO 검증 정확도 | **68%** |

**전체 매치율: 82%**

설계 의도 10개 항목 중 **6개 완전 매치, 4개 부분 매치/불일치**입니다. 프롬프트 설계는 매우 정교하게 작성되어 있으며, 업계 레퍼런스 데이터 제공, 빈말 금지 규칙, DIA/C-Rank 최적화 등 실무적으로 높은 수준입니다.

가장 시급한 수정은 **(1) SEO 발행 기준을 50점에서 70점으로 상향**과 **(2) 이미지를 한국/동양 분위기로 교체**입니다. 이 두 가지만 해결하면 매치율이 90% 이상으로 올라갑니다.

---

## Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 1.0 | 2026-02-24 | 초기 분석 | Gap Detector Agent |
